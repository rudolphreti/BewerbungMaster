@page "/"
@using BewerbungMasterApp.Components.Pages
@using BewerbungMasterApp.Interfaces
@inherits HomeBase
@rendermode InteractiveServer

<div class="container my-5">
    <h3 class="text-center mb-4">Job Applications List</h3>

    @if (jobApplications == null)
    {
        <p class="text-center">Loading data...</p>
    }
    else if (jobApplications.Count == 0)
    {
        <p class="text-center">No applications available.</p>
    }
    else
    {
        <div class="table-responsive mx-auto" style="max-width: 100%;">
            <table class="table table-striped table-bordered table-hover">
                <thead class="table-dark">
                    <tr>
                        <th scope="col" class="text-center">#</th>
                        <th scope="col" class="text-center col-4">Position</th>
                        <th scope="col" class="text-center col-4">Company</th>
                        <th scope="col" class="text-center">URL</th>
                        <th scope="col" class="text-center col-3">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @{
                        int index = 1;
                    }
                    @foreach (var job in jobApplications)
                    {
                        <tr>
                            <td class="text-center">@index</td>
                            <td class="text-center text-wrap">@job.Position</td>
                            <td class="text-center text-wrap">@job.Company</td>
                            <td class="text-center">
                                <a href="@job.URL" target="_blank" class="btn btn-primary btn-sm">Link</a>
                            </td>
                            <td class="text-center">
                                <button class="btn btn-danger btn-sm me-2" @onclick="@(() => DeleteJobApplication(job.Id))">Delete</button>
                                <button class="btn btn-secondary btn-sm" @onclick="@(() => MoveJobApplicationToEnd(job.Id))">Down</button>
                            </td>
                        </tr>
                        index++;
                    }
                </tbody>
            </table>
        </div>
    }
</div>